@import "leaflet/dist/leaflet.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 
  Krishi Mitra Pro - Dual Theme Color System (fixed)
  - CSS custom properties store H S L triplets (no hsl() wrapper here).
  - We use hsl(var(--xxx)) where a color is required.
  - Avoided invalid @apply usage for custom properties.
*/

@layer base {
  :root {
    /* Light Mode Palette (store H S L triplets) */
    --background: 0 0% 98%;        /* #FAFAFA */
    --foreground: 215 30% 18%;     /* #1E293B */

    --card: 0 0% 100%;             /* #FFFFFF */
    --card-foreground: 215 30% 18%;/* #1E293B */

    --popover: 0 0% 100%;
    --popover-foreground: 215 30% 18%;

    --primary: 122 48% 33%;        /* #2E7D32 */
    --primary-foreground: 0 0% 100%;

    --secondary: 122 39% 49%;      /* #4CAF50 */
    --secondary-foreground: 0 0% 100%;

    --muted: 215 16% 90%;
    --muted-foreground: 215 16% 47%;

    --accent: 39 95% 56%;          /* #F9A825 */
    --accent-foreground: 215 30% 18%;

    --destructive: 1 79% 55%;      /* #E53935 */
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 88%;
    --input: 0 0% 88%;
    --ring: 122 48% 33%;

    --radius: 0.75rem;
  }

  /* Dark mode variables anchored to a .dark class (e.g., <html class="dark">) */
  .dark {
    --background: 222 47% 11%;     /* #0F172A */
    --foreground: 210 40% 96%;     /* #F1F5F9 */

    --card: 215 30% 18%;           /* #1E293B */
    --card-foreground: 210 40% 96%;

    --popover: 215 30% 18%;
    --popover-foreground: 210 40% 96%;

    --primary: 123 44% 64%;        /* #81C784 */
    --primary-foreground: 222 47% 11%;

    --secondary: 122 39% 49%;
    --secondary-foreground: 0 0% 100%;

    --muted: 215 28% 20%;
    --muted-foreground: 215 25% 65%;

    --accent: 39 95% 56%;
    --accent-foreground: 222 47% 11%;

    --destructive: 1 79% 55%;
    --destructive-foreground: 0 0% 100%;

    --border: 215 28% 27%;
    --input: 215 28% 27%;
    --ring: 123 44% 64%;
  }

  /* Global element defaults â€” using CSS variables through hsl() */
  * {
    /* preserve Tailwind's transition utilities while ensuring color transitions */
    @apply transition-colors duration-200;
    box-sizing: border-box;
  }

  html, body {
    height: 100%;
  }

  body {
    margin: 0;
    font-family: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
      Roboto, "Helvetica Neue", Arial;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Small set of reusable component rules using variables */
  .card {
    background-color: hsl(var(--card));
    color: hsl(var(--card-foreground));
    border-radius: var(--radius);
    border: 1px solid hsl(var(--border));
    padding: 1rem;
    box-shadow: 0 6px 18px rgba(2,6,23,0.06);
  }

  .btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    border: 1px solid hsl(var(--primary));
    font-weight: 600;
    cursor: pointer;
    transition: transform 160ms ease, box-shadow 160ms ease;
  }

  .btn-primary:active {
    transform: translateY(1px);
  }

  .muted-bg {
    background-color: hsl(var(--muted));
    color: hsl(var(--muted-foreground));
    padding: 0.5rem;
    border-radius: 0.375rem;
  }

  /* Form input using variables */
  input[type="text"],
  input[type="search"],
  textarea,
  select {
    background-color: hsl(var(--input));
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--border));
    padding: 0.5rem 0.75rem;
    border-radius: 0.5rem;
    outline: none;
    transition: box-shadow 160ms ease, border-color 160ms ease;
  }

  input[type="text"]:focus,
  input[type="search"]:focus,
  textarea:focus,
  select:focus {
    box-shadow: 0 0 0 4px hsla(var(--ring), 0.12);
    border-color: hsl(var(--ring));
  }
}

@layer utilities {
  .fade-in-up {
    animation: fadeInUp 0.6s ease-in-out;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* handy helpers to use the CSS variables as Tailwind-like utilities */
  .bg-cc {
    background-color: hsl(var(--card)) !important;
  }
  .text-cc {
    color: hsl(var(--card-foreground)) !important;
  }
}
